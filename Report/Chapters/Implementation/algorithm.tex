\section{Algorithm}
\label{sec:algorithm}

The music at a bar should never stop playing as described in \cref{musthave}. To handle that the music does not stop playing, when there is not voted on any song. To handle this an algorithm was designed to chose a song similarly to the songs that was played previously played. In \cref{sub:MusicFlow} it's described that the music may not soundly change genre. This algorithm should prevent the music from doing from making these soundly music changes, by looking at the 9 last played songs.

\begin{algorithm}
\caption{Algorithm for finding the next track to be played.}
\begin{algorithmic}[1]
	\Function{nextTrack}{$H$} \Comment{$H$ is a list of previously played tracks.}
		\State{$k = 9$}
		\State{$l = empty$ $list$}
		\If{$H.length < 9$}
			\State{$k = H.length$}
		\EndIf{}
		\For{$i = 0$ \textbf{to} $k$}
			\For{$j = 0$ \textbf{to} $H[i].Artists.length$}
				\For{$f = 0$ \textbf{to} $H[i].Artists[j].relatedArtists.lenght$}
					\State{$A = H[i].Artists[j].relatedArtists[f]$}
					\If{$l.contains(A)$}
						\State{$A.reladted += 1$}
					\Else{}
						\State{$l.add(A)$}
						\State{$A.reladted = 1$}
					\EndIf{}
				\EndFor{}
			\EndFor{}
		\EndFor{}
		\State{$x = null$}
		\State{$track = null$}
		\For{$i = 0$ \textbf{to} $l.length$}
			\If{$x = null$ || $l[i].reladted > x.reladted$}
				\State{$x = l[i]$}
			\EndIf{}
		\EndFor{}
		\For{$i = 0$ \textbf{to} $x.top.lenght$}
			\If{$!H.contains(x.top[i])$}
			\State{}\Return{$x.top[i]$}			
			\EndIf{}
		\EndFor{}
	\EndFunction{}
\end{algorithmic}
\end{algorithm}
