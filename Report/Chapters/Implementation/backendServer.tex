\section{Backend Server}
\label{imp:backendServer}

As described in \cref{techPlat:backendServer}, HTTP endpoints must be
available to the client from the server. This section presents all the
available endpoints and describes key implementation
details. Additionally the details of the playback of tracks from
Spotify are detailed.

Nancy, a lightweight framework for building HTTP services in C\# is leveraged
to cut down development time.

\subsection{Checking-in}
For checking in to a venue, the client has to send a unique user ID to
the endpoint shown in \cref{lst:endpoint_checkin}

\begin{lstlisting}[label={lst:endpoint_checkin}, caption={HTTP endpoint allowing client to check-in to a venue. Text surrounded by curly brackets are parameters.}]
http://server:port/checkin/{userID}
\end{lstlisting}

\subsubsection{Returns}
"OK" when action is completed.

\subsection{Searching}
To search, just a search query is needed.

\begin{lstlisting}[label={lst:endpoint_search}, caption={Text surrounded by curly brackets are parameters.}]
http://server:port/search/{query}
\end{lstlisting}

\begin{lstlisting}[label={lst:endpoint_search_offset}, caption={Text surrounded by curly brackets are parameters.}]
http://server:port/search/{query}/{offset}
\end{lstlisting}

\subsubsection{Returns}
Tracks on Spotify that matches the query requested, with a possible offset for more results. This is formatted in JSON.

\subsection{Playlist}

\begin{lstlisting}[label={lst:endpoint_playlist}, caption={Text surrounded by curly brackets are parameters.}]
http://server:port/playlist
\end{lstlisting}

\subsubsection{Returns}
The current and sorted playlist is returned to the client in JSON.

\subsection{Now playing}

\begin{lstlisting}[label={lst:endpoint_nowplaying}, caption={Text surrounded by curly brackets are parameters.}]
http://server:port/nowplaying
\end{lstlisting}

\subsubsection{Returns}
The current playing track or \enquote{Nothing currently playing} is returned to the client in JSON.

\subsection{Voting}

\begin{lstlisting}[label={lst:endpoint_vote}, caption={Text surrounded by curly brackets are parameters.}]
http://server:port/vote/{userID}/{trackId}
\end{lstlisting}

\frnote{mangler lidt teskst}

\subsection{Volume}

\begin{lstlisting}[label={lst:endpoint_volume}, caption={Text surrounded by curly brackets are parameters.}]
http://server:port/volume/{volPercent}/{userId}
\end{lstlisting}

\subsubsection{Returns}
The average percentage of volume of all users is returned to the client.

\subsection{Check-out}

\begin{lstlisting}[label={lst:endpoint_checkout}, caption={Text surrounded by curly brackets are parameters.}]
http://server:port/checkout/{userID}
\end{lstlisting}

\subsubsection{Returns}
"Success" or "Failure" depending on is the action was successful.

\subsubsection{Returns}
"OK" when action is completed.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../master"
%%% End:
